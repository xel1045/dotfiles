#!/bin/bash

set -eu

git fetch

BRANCH=$(git rev-parse --abbrev-ref HEAD)

# $BRANCH -> main
git checkout main
git reset origin/main --hard
git merge "$BRANCH" --no-ff

# main -> $BRANCH
git checkout "$BRANCH"
git rebase main

# main -> develop
git checkout develop
git reset origin/develop --hard
git merge main --no-ff

# checkout $BRANCH
git checkout "$BRANCH"
